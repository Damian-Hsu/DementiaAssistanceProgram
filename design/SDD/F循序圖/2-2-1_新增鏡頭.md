# 2-2-1 新增鏡頭

# Mermaid
```mermaid
sequenceDiagram
  actor User
  participant Browser
  participant WebUIServer
  participant APIServer
  participant Postgres

  User ->> Browser: 輸入【鏡頭名稱】並點選【建立鏡頭】
  Browser ->> WebUIServer: POST /bff/v1/camera/\n{name,...}\nAuthorization: Bearer jwt
  WebUIServer ->> APIServer: POST /api/v1/camera/
  APIServer ->> Postgres: INSERT camera\n(status=active, token_version=1)\n+ 生成 path（若欄位存在）
  Postgres -->> APIServer: commit ok + camera id
  APIServer -->> WebUIServer: 201 camera
  WebUIServer -->> Browser: 201 camera

  Browser ->> Browser: 重新載入鏡頭清單\n並顯示鏡頭控制區塊
```

## Mermaid 備註
- API：`POST /bff/v1/camera/` → `POST /api/v1/camera/`。\n- 後端：一般使用者只能建立自己的鏡頭（`user_id` 由 JWT 決定）；會在 `flush` 後以 camera UUID 派生 `path`。\n- 缺少的關鍵資訊：前端是否允許設定 max_publishers 等進階欄位；本圖以最小 `{name}` 抽象表示（假設）。\n+

