# 1-2 登出

# Mermaid
```mermaid
sequenceDiagram
  actor User
  participant Browser

  User ->> Browser: 點選【登出】(側邊欄/底部導覽/設定頁)
  Browser ->> Browser: showModal()\n顯示「是否登出」確認對話框

  alt 使用者取消/點擊視窗外/按 ESC
    User ->> Browser: 取消或關閉對話框
    Browser ->> Browser: close()\n維持登入狀態
  else 使用者確認登出
    User ->> Browser: 點選【確認】
    Browser ->> Browser: close()
    Browser ->> Browser: 清除 localStorage['jwt']\n清除 user_role/user_id\n清除 window.__CURRENT_USER(若存在)
    Browser ->> Browser: window.location.replace('/auth')\n導回登入頁
  end

  opt 未登入保護（頁面載入時）
    Browser ->> Browser: 若 AuthService.isLoggedIn() 為 false\n導向 /auth
  end
```

## Mermaid 備註
- 程式位置：`services/WebUIServer/app/static/js/logout.js`、`services/WebUIServer/app/static/js/AuthService.js`。
- 重要特性：登出**不呼叫後端 API**，只做前端 token/快取清除與導頁。
- 缺少的關鍵資訊：若系統未來要做「token 伺服端黑名單」或「refresh token 撤銷」，需新增後端登出端點（目前未見）（假設）。


