# 2-1-6 刪除當日 Vlog

- **功能編號**：2-1-6
- **功能名稱**：刪除當日 Vlog
- **功能說明**：當每日 Vlog 狀態為已完成或失敗時，首頁顯示「刪除 Vlog」按鈕；使用者確認後，前端呼叫後端刪除端點，後端刪除 vlogs 記錄並（best-effort）刪除 MinIO 影片物件，vlog_segments 由資料庫 CASCADE 一併刪除；刪除成功後首頁重新載入該日期 Vlog 狀態。
- **程式名稱**：services/WebUIServer/app/template/home.html; services/WebUIServer/app/static/js/vlog.js; services/WebUIServer/app/static/js/APIClient.js; services/APIServer/app/router/Vlogs/service.py; services/APIServer/app/DataAccess/tables/vlogs.py
- **輸入**：滑鼠；Vlog介面、vlogs資料表
- **輸出**：螢幕、資料庫；Vlog介面、vlogs資料表

## INPUT / PROCESS / OUTPUT

| INPUT | PROCESS | OUTPUT |
|---|---|---|
| ❶ 滑鼠點選【刪除Vlog】<br>&nbsp;&nbsp;① 【取消】<br>&nbsp;&nbsp;② 【確認】 |  | ❶ 跳出刪除確認視窗 |
| ❶-① 滑鼠點選【取消】 |  | ❶-① 關閉刪除確認視窗 |
| ❶-② 滑鼠點選【確認】 | ❶-② 呼叫刪除 API 並移除 vlogs/vlog_segments 相關資料。 | ❶-② 刪除Vlog資料 |

## 資料表

### vlogs; vlog_segments

| 欄位 | 中文 | 型態 | 長度 | 空值 | 預設值 | 備註 |
|---|---|---|---:|---|---|---|
| id | VlogID | UUID |  | 否 | uuid7 | vlogs.id；Primary Key |
| user_id | 使用者ID | INTEGER |  | 否 |  | vlogs.user_id（權限驗證） |
| s3_key | 影片S3路徑 | TEXT |  | 是 |  | vlogs.s3_key（刪除 MinIO 物件） |
| id | 分鏡ID | UUID |  | 否 | uuid7 | vlog_segments.id；Primary Key |
| vlog_id | VlogID | UUID |  | 否 |  | vlog_segments.vlog_id；ForeignKey(vlogs.id)；CASCADE 刪除 |
