# 2-5-1 送出訊息/顯示對話歷史

- **功能編號**：2-5-1
- **功能名稱**：送出訊息/顯示對話歷史
- **功能說明**：使用者送出訊息後，系統顯示 AI 回覆並把對話歷史保存於瀏覽器本機；重新進入頁面時會載入歷史對話。
- **程式名稱**：services/WebUIServer/app/template/chat.html; services/WebUIServer/app/static/js/chat.js; services/WebUIServer/app/static/js/APIClient.js; services/WebUIServer/app/static/js/AuthService.js; services/APIServer/app/router/Chat/service.py; services/APIServer/app/router/Chat/DTO.py; services/APIServer/app/DataAccess/tables/llm_usage_logs.py
- **輸入**：系統、鍵盤、滑鼠；AI助手介面
- **輸出**：螢幕；AI助手介面
- **備註**：對話歷史存於 localStorage（非資料庫）。

## INPUT / PROCESS / OUTPUT

| INPUT | PROCESS | OUTPUT |
|---|---|---|
| ❶ 系統載入對話歷史 | ❶ 從本機儲存讀取並渲染歷史訊息。 | ❶ 顯示對話歷史 |
| ❷ 鍵盤輸入【訊息】 |  |  |
| ❸ 滑鼠點選【發送】 | ❸ 送出聊天請求並更新本機對話歷史。 | ❸ 顯示AI回覆 |

## 資料表

### llm_usage_logs

| 欄位 | 中文 | 型態 | 長度 | 空值 | 預設值 | 備註 |
|---|---|---|---:|---|---|---|
