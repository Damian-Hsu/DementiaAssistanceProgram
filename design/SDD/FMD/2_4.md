# 2-4 事件檢視（Events）

- **功能編號**：2-4
- **功能名稱**：事件檢視（Events）
- **功能說明**：事件檢視頁提供事件列表查詢（日期範圍/關鍵字/排序/分頁），並可針對單一事件查看詳情、編輯事件內容（行為/地點/物件/摘要）與刪除事件；資料來源為 events 表，並可透過 recording_id 連結回影片管理頁查看對應影片。
- **程式名稱**：services/WebUIServer/app/template/events.html; services/WebUIServer/app/static/js/events.js; services/WebUIServer/app/static/js/APIClient.js; services/APIServer/app/router/Events/service.py; services/APIServer/app/router/Events/DTO.py; services/APIServer/app/DataAccess/tables/events.py
- **輸入**：系統、鍵盤、滑鼠；事件檢視介面、events資料表
- **輸出**：螢幕、資料庫；事件檢視介面、events資料表

## INPUT / PROCESS / OUTPUT

| INPUT | PROCESS | OUTPUT |
|---|---|---|
| ❶ 系統載入事件檢視介面 | ❶ 查詢 events 資料表並顯示事件列表。 | ❶ 顯示事件列表 |
| ❷ 滑鼠點選【詳情】 | ❷ 查詢單一事件內容並開啟詳情視窗。 | ❷ 跳出事件詳情視窗 |
| ❸ 滑鼠點選【儲存事件】 | ❸ 更新 events 資料表並刷新列表。 | ❸ 更新事件資料 |

## 資料表

### events

| 欄位 | 中文 | 型態 | 長度 | 空值 | 預設值 | 備註 |
|---|---|---|---:|---|---|---|
| id | 事件ID | UUID |  | 否 | uuid7 | Primary Key |
| user_id | 使用者ID | INTEGER |  | 否 |  | ForeignKey(users.id)；索引 |
| recording_id | 錄影ID | UUID |  | 是 |  | ForeignKey(recordings.id)；索引 |
| action | 行為 | VARCHAR | 128 | 是 |  |  |
| scene | 地點 | VARCHAR | 128 | 是 |  |  |
| summary | 摘要 | TEXT |  | 是 |  |  |
| objects | 物件清單 | ARRAY(VARCHAR) |  | 是 |  |  |
| start_time | 事件開始時間 | TIMESTAMP WITH TIME ZONE |  | 是 |  | 排序/日期範圍查詢 |
| duration | 持續秒數 | FLOAT |  | 是 |  |  |
| created_at | 建立時間(UTC) | TIMESTAMP WITH TIME ZONE |  | 否 | timezone('UTC', now()) | TimestampMixin |
| updated_at | 更新時間(UTC) | TIMESTAMP WITH TIME ZONE |  | 是 |  | TimestampMixin；更新時由資料庫 onupdate |
