# 2-5-4 額度限制提示

- **功能編號**：2-5-4
- **功能名稱**：額度限制提示
- **功能說明**：當使用者使用系統預設 AI Key 且觸發限流/配額或黑名單時，後端回傳錯誤，前端在對話中顯示提示訊息。
- **程式名稱**：services/APIServer/app/router/Chat/service.py; services/APIServer/app/router/Chat/rate_limiter.py; services/APIServer/app/DataAccess/tables/settings.py; services/APIServer/app/DataAccess/tables/api_key_blacklist.py; services/WebUIServer/app/static/js/chat.js; services/WebUIServer/app/static/js/APIClient.js
- **輸入**：系統；settings資料表、api_key_blacklist資料表
- **輸出**：螢幕；額度限制提示

## INPUT / PROCESS / OUTPUT

| INPUT | PROCESS | OUTPUT |
|---|---|---|
| ❶ 系統判斷使用者是否使用預設AI Key<br>&nbsp;&nbsp;① 【在黑名單】<br>&nbsp;&nbsp;② 【超出配額/限流】 | ❶ 若在黑名單或超出限制，回傳錯誤並要求使用者稍後再試或改用自帶 Key。 | ❶ 顯示額度限制提示 |

## 資料表

### settings; api_key_blacklist

| 欄位 | 中文 | 型態 | 長度 | 空值 | 預設值 | 備註 |
|---|---|---|---:|---|---|---|
