# 3-2-4 預設 API Key 黑名單管理

- **功能編號**：3-2-4
- **功能名稱**：預設 API Key 黑名單管理
- **功能說明**：管理員可將使用者加入/移除預設 API Key 黑名單；加入時可填原因，並同步停用 users.settings.use_default_api_key。
- **程式名稱**：services/WebUIServer/app/static/js/admin_users.js; services/WebUIServer/app/template/admin_users.html; services/WebUIServer/app/static/js/APIClient.js; services/APIServer/app/router/Admin/service.py; services/APIServer/app/router/Admin/DTO.py; services/APIServer/app/DataAccess/tables/api_key_blacklist.py; services/APIServer/app/DataAccess/tables/users.py
- **輸入**：滑鼠、鍵盤；使用者詳情視窗、api_key_blacklist資料表、users資料表
- **輸出**：資料庫、螢幕；api_key_blacklist資料表、users資料表、使用者詳情視窗
- **備註**：加入黑名單會強制停用 use_default_api_key。

## INPUT / PROCESS / OUTPUT

| INPUT | PROCESS | OUTPUT |
|---|---|---|
| ❶ 滑鼠切換【黑名單】<br>&nbsp;&nbsp;① 【加入】<br>&nbsp;&nbsp;② 【移除】 |  |  |
| ❷ 鍵盤輸入【原因】 |  |  |
| ❸ 滑鼠點選【儲存】<br>&nbsp;&nbsp;① 【加入黑名單】<br>&nbsp;&nbsp;② 【移除黑名單】 | ❸ 加入黑名單：寫入 api_key_blacklist 並將 users.settings.use_default_api_key 設為 false；移除黑名單：刪除 api_key_blacklist 記錄。 | ❸ 更新黑名單狀態 |

## 資料表

### api_key_blacklist; users

| 欄位 | 中文 | 型態 | 長度 | 空值 | 預設值 | 備註 |
|---|---|---|---:|---|---|---|
