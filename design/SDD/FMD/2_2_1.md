# 2-2-1 新增鏡頭

- **功能編號**：2-2-1
- **功能名稱**：新增鏡頭
- **功能說明**：使用者在鏡頭頁輸入鏡頭名稱並提交後，前端呼叫後端建立鏡頭；後端依角色決定 user_id（一般使用者只能建立自己的鏡頭，管理員可指定），並建立 camera 記錄（預設 status=active，並自動生成 path），成功後前端重新載入鏡頭資訊與控制區塊。
- **程式名稱**：services/WebUIServer/app/template/camera.html; services/WebUIServer/app/static/js/camera.js; services/WebUIServer/app/static/js/services/CameraService.js; services/WebUIServer/app/static/js/APIClient.js; services/APIServer/app/router/Camera/service.py; services/APIServer/app/router/Camera/DTO.py; services/APIServer/app/DataAccess/tables/camera.py
- **輸入**：鍵盤、滑鼠；鏡頭介面、camera資料表
- **輸出**：螢幕、資料庫；鏡頭介面、camera資料表

## INPUT / PROCESS / OUTPUT

| INPUT | PROCESS | OUTPUT |
|---|---|---|
| ❶ 鍵盤輸入【鏡頭名稱】 |  |  |
| ❷ 滑鼠點選【建立鏡頭】 | ❷ 送出建立請求並在後端建立 camera 記錄。 | ❷ 新增鏡頭資料 |

## 資料表

### camera

| 欄位 | 中文 | 型態 | 長度 | 空值 | 預設值 | 備註 |
|---|---|---|---:|---|---|---|
| id | 鏡頭ID | UUID |  | 否 | uuid7 | Primary Key |
| user_id | 使用者ID | INTEGER |  | 否 |  | ForeignKey(users.id)；索引 |
| name | 鏡頭名稱 | VARCHAR | 128 | 否 |  |  |
| status | 鏡頭狀態 | ENUM |  | 否 | inactive | CameraStatusEnum |
| path | 串流路徑 | VARCHAR | 64 | 是 |  | 唯一；索引 |
| token_version | Token版本 | INTEGER |  | 否 | 0 |  |
| last_seen_at | 最後上線時間 | TIMESTAMP WITH TIME ZONE |  | 是 |  |  |
| max_publishers | 最大推流者數量 | INTEGER |  | 否 | 1 |  |
| created_at | 建立時間(UTC) | TIMESTAMP WITH TIME ZONE |  | 否 | timezone('UTC', now()) | TimestampMixin |
| updated_at | 更新時間(UTC) | TIMESTAMP WITH TIME ZONE |  | 是 |  | TimestampMixin；更新時由資料庫 onupdate |
