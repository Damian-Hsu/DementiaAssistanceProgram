# 2-6-6 LLM 設定

- **功能編號**：2-6-6
- **功能名稱**：LLM 設定
- **功能說明**：使用者可設定是否使用系統預設 API Key，或改用自帶 API Key 與模型設定；儲存後更新 users.settings 並可能清除模型快取。
- **程式名稱**：services/WebUIServer/app/template/user_profile.html; services/WebUIServer/app/static/js/user_profile.js; services/WebUIServer/app/static/js/APIClient.js; services/APIServer/app/router/User/service.py; services/APIServer/app/router/User/settings.py; services/APIServer/app/router/Chat/llm_tools.py; services/APIServer/app/DataAccess/tables/users.py; services/APIServer/app/DataAccess/tables/api_key_blacklist.py; services/APIServer/app/DataAccess/tables/settings.py
- **輸入**：滑鼠、鍵盤；使用者設定介面、users資料表
- **輸出**：螢幕、資料庫；使用者設定介面、users資料表

## INPUT / PROCESS / OUTPUT

| INPUT | PROCESS | OUTPUT |
|---|---|---|
| ❶ 滑鼠切換【使用系統預設API Key】<br>&nbsp;&nbsp;① 【啟用】<br>&nbsp;&nbsp;② 【停用】 | ❶ 依勾選狀態切換表單可編輯欄位。 | ❶ 更新模型設定表單 |
| ❷ 鍵盤輸入【Provider】、【Model】、【Google API Key】 |  |  |
| ❸ 滑鼠點選【儲存模型設定】 | ❸ 更新 users.settings 的 LLM 設定；若在黑名單則拒絕啟用系統預設 key。<br>&nbsp;&nbsp;① 成功：更新設定<br>&nbsp;&nbsp;② 失敗：提示需改用自帶 Key | ❸ 更新LLM設定 |

## 資料表

### users; api_key_blacklist; settings

| 欄位 | 中文 | 型態 | 長度 | 空值 | 預設值 | 備註 |
|---|---|---|---:|---|---|---|
