{"openapi":"3.1.0","info":{"title":"Dementia Assistance Program API","version":"1.0.0"},"servers":[{"url":"/api/v1"}],"paths":{"/auth/signup":{"post":{"tags":["auth"],"summary":"Signup","description":"註冊新使用者 → 建立 users.Table → 回傳 JWT","operationId":"signup_auth_signup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequestDTO"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/signupadmin":{"post":{"tags":["auth"],"summary":"Signup Admin","operationId":"signup_admin_auth_signupadmin_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequestDTO"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["auth"],"summary":"Login","description":"登入 → 驗證帳號密碼 → 回傳 JWT","operationId":"login_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/m2m/ping":{"get":{"tags":["machine-to-machine"],"summary":"Ping","operationId":"ping_m2m_ping_get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"api-key","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/m2m/check-stream-pwd":{"post":{"tags":["machine-to-machine"],"summary":"Check Stream Pwd","operationId":"check_stream_pwd_m2m_check_stream_pwd_post","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"api-key","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me":{"get":{"tags":["users"],"summary":"Read Me","operationId":"read_me_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"patch":{"tags":["users"],"summary":"Update Me","operationId":"update_me_users_me_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserProfileDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/me/password":{"put":{"tags":["users"],"summary":"Change Password","operationId":"change_password_users_me_password_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequestDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/token/refresh":{"get":{"tags":["users"],"summary":"Refresh Token","description":"重新申請個人JWT Token","operationId":"refresh_token_users_token_refresh_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDTO"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/settings":{"get":{"tags":["users"],"summary":"Get User Settings","description":"獲取使用者設定","operationId":"get_user_settings_users_settings_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSettingsResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"patch":{"tags":["users"],"summary":"Update User Settings","description":"更新使用者設定","operationId":"update_user_settings_users_settings_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserSettingsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSettingsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/settings/timezones":{"get":{"tags":["users"],"summary":"Get Available Timezones","description":"獲取可用時區列表","operationId":"get_available_timezones_users_settings_timezones_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/admin/api-keys":{"post":{"tags":["admin"],"summary":"Create Key","operationId":"create_key_admin_api_keys_post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeyCreateDTO"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeySecretOutDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["admin"],"summary":"List Keys","operationId":"list_keys_admin_api_keys_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"owner_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"依擁有者過濾（可選）","title":"Owner Id"},"description":"依擁有者過濾（可選）"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApiKeyOutDTO"},"title":"Response List Keys Admin Api Keys Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/api-keys/{key_id}":{"patch":{"tags":["admin"],"summary":"Update Key","operationId":"update_key_admin_api_keys__key_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"key_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Key Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeyPatchDTO"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeyOutDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/api-keys/{key_id}/rotate":{"post":{"tags":["admin"],"summary":"Rotate Key","operationId":"rotate_key_admin_api_keys__key_id__rotate_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"key_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Key Id"}}],"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeySecretOutDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/":{"post":{"tags":["camera"],"summary":"Create Camera","description":"新增相機：預設 active、token_version=1。\n若模型上存在 rtsp_path 欄位，會在取得 id 後自動填入。","operationId":"create_camera_camera__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CameraCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CameraRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["camera"],"summary":"List Cameras","description":"列出某使用者的相機（管理員可看所有人，一般使用者只能看自己的）。","operationId":"list_cameras_camera__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CameraStatus"},{"type":"null"}],"title":"Status"}},{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Q"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":20,"title":"Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CameraListResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/{id}":{"patch":{"tags":["camera"],"summary":"Update Camera","operationId":"update_camera_camera__id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CameraUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__router__Recordings__DTO__OkResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["camera"],"summary":"Delete Camera","description":"Demo：做邏輯刪除（status=deleted）。\n如果你真的要物理刪除，改成 await db.delete(cam) + commit 即可。","operationId":"delete_camera_camera__id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__router__Recordings__DTO__OkResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["camera"],"summary":"Get Camera","description":"取得單一相機資訊（管理員可看所有人，一般使用者只能看自己的）。","operationId":"get_camera_camera__id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CameraRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/{id}/status":{"patch":{"tags":["camera"],"summary":"Set Status","description":"修改相機狀態（active / inactive / deleted）。\n只有管理員或擁有者可以修改所有相機，但一般使用者只能改自己的。","operationId":"set_status_camera__id__status_patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CameraStatusReq"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__router__Recordings__DTO__OkResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/{id}/token/version-rotate":{"post":{"tags":["camera"],"summary":"Rotate Token Version","description":"一鍵失效所有舊 token（這台相機）：token_version += 1","operationId":"rotate_token_version_camera__id__token_version_rotate_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenVersionResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/{id}/stream/connect":{"post":{"tags":["camera"],"summary":"Connect Stream","description":"建立 RTSP 推流與 HLS 播放：\n1) 簽 publisher token → 給客戶端推流。\n2) 簽 player token → StreamingServer 拉流（內部用）。\n3) 呼叫 /streams/start 開錄。","operationId":"connect_stream_camera__id__stream_connect_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateTokenReq"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreamConnectResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/{id}/stream/stop":{"post":{"tags":["camera"],"summary":"Stop Stream","description":"停止錄影（StreamingServer 停拉流與切片）。","operationId":"stop_stream_camera__id__stream_stop_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__router__Recordings__DTO__OkResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/{id}/publish_rtsp_url":{"get":{"tags":["camera"],"summary":"Get Publish Rtsp Url","description":"發 RTSP 推流用的 JWT，回傳帶 token 的 URL。","operationId":"get_publish_rtsp_url_camera__id__publish_rtsp_url_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}},{"name":"ttl","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":3600,"minimum":30},{"type":"null"}],"default":60,"title":"Ttl"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/{id}/play-hls-url":{"get":{"tags":["camera"],"summary":"Get Play Hls Url","description":"發 HLS 播放用的 JWT，回傳帶 token 的 URL。","operationId":"get_play_hls_url_camera__id__play_hls_url_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}},{"name":"ttl","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":3600,"minimum":30},{"type":"null"}],"default":60,"title":"Ttl"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlayHLSURLResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/{id}/play-webrtc-url":{"get":{"tags":["camera"],"summary":"Get Play Webrtc Url","description":"發 WebRTC 播放用的 JWT，回傳帶 token 的 URL。","operationId":"get_play_webrtc_url_camera__id__play_webrtc_url_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}},{"name":"ttl","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":3600,"minimum":30},{"type":"null"}],"default":60,"title":"Ttl"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlayWebRTCURLResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/camera/{id}/token/refresh/{audience}":{"get":{"tags":["camera"],"summary":"Refresh Token","description":"重新簽發串流，只負責延長有效期（refresh token）。\n需要提供還在有效期內的舊 token，並且會驗證 token 的有效性與欄位。","operationId":"refresh_token_camera__id__token_refresh__audience__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Id"}},{"name":"audience","in":"path","required":true,"schema":{"enum":["rtsp","hls","webrtc"],"type":"string","description":"指定要重新簽發的 token 用途","title":"Audience"},"description":"指定要重新簽發的 token 用途"},{"name":"token","in":"query","required":true,"schema":{"type":"string","description":"還在有效期內的舊 token","title":"Token"},"description":"還在有效期內的舊 token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/events/":{"get":{"tags":["events"],"summary":"List Events","description":"事件列表（可篩選 recording / 時間區間 / 關鍵字 / 排序 + 分頁）","operationId":"list_events_events__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"recording_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Recording Id"}},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"指定使用者 ID（僅管理員可用）","title":"User Id"},"description":"指定使用者 ID（僅管理員可用）"},{"name":"start_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"ISO local date","title":"Start Time"},"description":"ISO local date"},{"name":"end_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"ISO local date","title":"End Time"},"description":"ISO local date"},{"name":"keywords","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"查詢 action / scene / summary / objects","title":"Keywords"},"description":"查詢 action / scene / summary / objects"},{"name":"sr","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"description":"查詢範圍，多值：?sr=action&sr=scene&sr=objects","title":"Sr"},"description":"查詢範圍，多值：?sr=action&sr=scene&sr=objects"},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"欄位：start_time|created_at|duration；加 :asc|:desc 或前綴 +/-","title":"Sort"},"description":"欄位：start_time|created_at|duration；加 :asc|:desc 或前綴 +/-"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":20,"title":"Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventListResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/events/{event_id}":{"get":{"tags":["events"],"summary":"Get Event","description":"取得單一事件內容","operationId":"get_event_events__event_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Event Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__router__Events__DTO__EventRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["events"],"summary":"Update Event","description":"更新事件（部分欄位）","operationId":"update_event_events__event_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Event Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__router__Recordings__DTO__OkResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["events"],"summary":"Delete Event","description":"刪除事件","operationId":"delete_event_events__event_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Event Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__router__Recordings__DTO__OkResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/recordings/{recording_id}":{"get":{"tags":["recordings"],"summary":"Get Recording Url","description":"取得影片的 **Pre-signed GET URL**（可直接播放/下載；支援 HTTP Range）。\n\n**Query 參數**\n- `ttl`: `int`，連結有效秒數，預設 `900`，範圍 `30..604800`\n- `disposition`: `inline | attachment`，控制瀏覽器顯示或下載\n- `filename`: `str | None`，下載檔名（未提供則取 `s3_key` 尾段）\n\n**呼叫範例**\n- 直接播放（5 分鐘）：  \n  `GET /recordings/{id}?ttl=300&disposition=inline`\n- 下載並指定檔名（30 分鐘）：  \n  `GET /recordings/{id}?ttl=1800&disposition=attachment&filename=myvideo.mp4`\n\n**注意**：此端點僅回傳影片 URL，不包含 recording 詳細資訊。","operationId":"get_recording_url_recordings__recording_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"recording_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"錄影片段 ID","title":"Recording Id"},"description":"錄影片段 ID"},{"name":"ttl","in":"query","required":false,"schema":{"type":"integer","maximum":604800,"minimum":30,"description":"URL 有效秒數（預設 900，最大 7 天）","default":900,"title":"Ttl"},"description":"URL 有效秒數（預設 900，最大 7 天）"},{"name":"disposition","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(inline|attachment)$"},{"type":"null"}],"description":"瀏覽器呈現方式：inline 或 attachment","title":"Disposition"},"description":"瀏覽器呈現方式：inline 或 attachment"},{"name":"filename","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"下載檔名；未提供則使用 s3_key 的檔名","title":"Filename"},"description":"下載檔名；未提供則使用 s3_key 的檔名"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordingUrlResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["recordings"],"summary":"Delete Recording","description":"**硬刪除** 錄影片段：刪 S3 物件 + 刪 DB 紀錄。  \n若 `events.recording_id` 沒有 `ON DELETE CASCADE`，此處會一併刪除關聯事件。\n\n**步驟**\n1. 讀取 DB 取得 `s3_key`  \n2. 刪除 S3 物件（冪等）  \n3. 刪除關聯事件（若未啟用級聯）  \n4. 刪除錄影紀錄\n\n**呼叫範例**\n- `DELETE /recordings/{id}`","operationId":"delete_recording_recordings__recording_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"recording_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"錄影片段 ID","title":"Recording Id"},"description":"錄影片段 ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__router__Recordings__DTO__OkResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/recordings/":{"get":{"tags":["recordings"],"summary":"List Recordings","description":"查詢 **影片列表**（事件關鍵字、時間、排序、分頁）。\n\n**Query 參數**\n- `keywords`: `str | None`，搜尋 *事件* 欄位（預設 `summary`）\n- `sr`: `List[str] | None`，範圍 `action|scene|summary|objects`\n- `start_time`, `end_time`: `date | None`，轉換為整日 UTC 範圍\n- `sort`: 允許 `start_time|created_at|duration|size_bytes|id`，可 `:asc|:desc` 或 `-field`\n- `page`, `size`: 分頁\n\n**呼叫範例**\n- 找出 2025-03-01 當天包含「喝水」事件摘要的影片：  \n  `GET /recordings?keywords=喝水&start_time=2025-03-01&sort=-start_time&page=1&size=20`\n- 指定查詢範圍為 `action` 與 `objects`：  \n  `GET /recordings?keywords=drinking&sr=action&sr=objects`","operationId":"list_recordings_recordings__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"指定使用者 ID（僅管理員可用）","title":"User Id"},"description":"指定使用者 ID（僅管理員可用）"},{"name":"keywords","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"在 *事件* 欄位內搜尋的關鍵字（預設比對 `summary`）","title":"Keywords"},"description":"在 *事件* 欄位內搜尋的關鍵字（預設比對 `summary`）"},{"name":"sr","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"description":"查詢範圍，多值：`?sr=action&sr=scene&sr=objects`；預設只查 `summary`","title":"Sr"},"description":"查詢範圍，多值：`?sr=action&sr=scene&sr=objects`；預設只查 `summary`"},{"name":"start_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"ISO local date；會轉為整日 UTC 開始","title":"Start Time"},"description":"ISO local date；會轉為整日 UTC 開始"},{"name":"end_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"ISO local date；若與 start_time 同給則形成區間","title":"End Time"},"description":"ISO local date；若與 start_time 同給則形成區間"},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"排序欄位：`start_time|created_at|duration|size_bytes|id`；可 `:asc|:desc` 或 `-field`","title":"Sort"},"description":"排序欄位：`start_time|created_at|duration|size_bytes|id`；可 `:asc|:desc` 或 `-field`"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":20,"title":"Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordingListResp"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/recordings/{recording_id}/events":{"get":{"tags":["recordings"],"summary":"Get Recording Events","description":"取得 **指定錄影底下的所有事件**（輕量，無複雜 join）。\n\n**Query 參數**\n- `sort`: 允許 `start_time|created_at|duration|id`；可 `:asc|:desc` 或 `-field`\n\n**呼叫範例**\n- 依事件開始時間新到舊：  \n  `GET /recordings/{id}/events?sort=-start_time`","operationId":"get_recording_events_recordings__recording_id__events_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"recording_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"錄影片段 ID","title":"Recording Id"},"description":"錄影片段 ID"},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"排序：`start_time|created_at|duration|id`，可 `:asc|:desc` 或 `-field`","title":"Sort"},"description":"排序：`start_time|created_at|duration|id`，可 `:asc|:desc` 或 `-field`"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/app__router__Recordings__DTO__EventRead"},"title":"Response Get Recording Events Recordings  Recording Id  Events Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chat/":{"post":{"tags":["chat"],"summary":"Chat With Memory Assistant","description":"對話式記憶助理（支持 Function Calling）\n\n**功能**：\n- 自然語言對話查詢生活事件\n- 支持多輪對話上下文\n- 自動調用工具函數獲取數據\n- 友善的對話式回覆\n\n**範例對話**：\n```\n用戶: \"我今天幾點吃早餐？\"\nAI: \"根據記錄，您今天早上 8:30 在廚房吃早餐，大約持續了 15 分鐘。\"\n\n用戶: \"我吃了什麼？\"\nAI: \"讓我查一下早餐的詳細資訊... [調用函數] 您吃了麵包和牛奶。\"\n```","operationId":"chat_with_memory_assistant_chat__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/chat/cleanup/{user_id}":{"delete":{"tags":["chat"],"summary":"Force Cleanup User Model","description":"強制清理特定使用者的 LLM 模型實例\n\n僅管理員可使用","operationId":"force_cleanup_user_model_chat_cleanup__user_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chat/stats":{"get":{"tags":["chat"],"summary":"Get Llm Stats","description":"獲取 LLM API 使用統計\n\n返回速率限制和緩存的統計資訊","operationId":"get_llm_stats_chat_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/":{"get":{"tags":["system"],"summary":"Read Root","description":"測試 API 是否連線","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/healthz":{"get":{"tags":["health"],"summary":"Health Check","description":"健康檢查 API","operationId":"health_check_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/datatime":{"get":{"tags":["system"],"summary":"Get Server Datetime","description":"取得伺服器當前 UTC 時間\n用於客戶端時間同步和查詢參數標準化","operationId":"get_server_datetime_datatime_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DateTimeResponse"}}}}}}}},"components":{"schemas":{"ApiKeyCreateDTO":{"properties":{"name":{"type":"string","title":"Name"},"owner_id":{"type":"integer","title":"Owner Id"},"rate_limit_per_min":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rate Limit Per Min"},"quota_per_day":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Quota Per Day"},"scopes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Scopes"}},"type":"object","required":["name","owner_id"],"title":"ApiKeyCreateDTO"},"ApiKeyOutDTO":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"owner_id":{"type":"integer","title":"Owner Id"},"active":{"type":"boolean","title":"Active"},"rate_limit_per_min":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rate Limit Per Min"},"quota_per_day":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Quota Per Day"},"scopes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Scopes"}},"type":"object","required":["id","name","owner_id","active"],"title":"ApiKeyOutDTO"},"ApiKeyPatchDTO":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Active"},"rate_limit_per_min":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rate Limit Per Min"},"quota_per_day":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Quota Per Day"},"scopes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Scopes"}},"type":"object","title":"ApiKeyPatchDTO"},"ApiKeySecretOutDTO":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"owner_id":{"type":"integer","title":"Owner Id"},"active":{"type":"boolean","title":"Active"},"rate_limit_per_min":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rate Limit Per Min"},"quota_per_day":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Quota Per Day"},"scopes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Scopes"},"token":{"type":"string","title":"Token"}},"type":"object","required":["id","name","owner_id","active","token"],"title":"ApiKeySecretOutDTO"},"Body_login_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_auth_login_post"},"CameraCreate":{"properties":{"user_id":{"type":"integer","title":"User Id"},"name":{"type":"string","maxLength":128,"title":"Name"},"max_publishers":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Max Publishers","default":1}},"type":"object","required":["user_id","name"],"title":"CameraCreate"},"CameraListResp":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CameraRead"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["items","total"],"title":"CameraListResp"},"CameraRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"name":{"type":"string","title":"Name"},"status":{"type":"string","title":"Status"},"token_version":{"type":"integer","title":"Token Version"},"last_seen_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Seen At"},"max_publishers":{"type":"integer","title":"Max Publishers"}},"type":"object","required":["id","user_id","name","status","token_version","max_publishers"],"title":"CameraRead"},"CameraStatus":{"type":"string","enum":["inactive","active","deleted"],"title":"CameraStatus"},"CameraStatusReq":{"properties":{"status":{"type":"string","enum":["inactive","active","deleted"],"title":"Status"}},"type":"object","required":["status"],"title":"CameraStatusReq"},"CameraUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":128},{"type":"null"}],"title":"Name"},"max_publishers":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Max Publishers"},"status":{"anyOf":[{"$ref":"#/components/schemas/CameraStatus"},{"type":"null"}]}},"type":"object","title":"CameraUpdate"},"ChangePasswordRequestDTO":{"properties":{"old_password":{"type":"string","title":"Old Password"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["old_password","new_password"],"title":"ChangePasswordRequestDTO"},"ChatMessage":{"properties":{"role":{"type":"string","enum":["user","assistant","system"],"title":"Role","description":"訊息角色"},"content":{"type":"string","title":"Content","description":"訊息內容"},"timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp","description":"訊息時間戳"}},"type":"object","required":["role","content"],"title":"ChatMessage","description":"單條對話訊息"},"ChatRequest":{"properties":{"message":{"type":"string","maxLength":1000,"minLength":1,"title":"Message","description":"用戶訊息"},"history":{"items":{"$ref":"#/components/schemas/ChatMessage"},"type":"array","title":"History","description":"對話歷史（最多保留最近 10 條）"},"date_from":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date From","description":"查詢起始日期（ISO format）"},"date_to":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date To","description":"查詢結束日期（ISO format）"},"max_results":{"type":"integer","maximum":50.0,"minimum":1.0,"title":"Max Results","description":"每次函數調用最多返回結果數","default":10}},"type":"object","required":["message"],"title":"ChatRequest","description":"對話式聊天請求"},"ChatResponse":{"properties":{"message":{"type":"string","title":"Message","description":"AI 回覆訊息"},"events":{"items":{"$ref":"#/components/schemas/EventSimple"},"type":"array","title":"Events","description":"相關事件列表"},"function_calls":{"items":{"$ref":"#/components/schemas/FunctionCallResult"},"type":"array","title":"Function Calls","description":"本次調用的函數列表"},"has_more":{"type":"boolean","title":"Has More","description":"是否還有更多結果可查詢","default":false},"total_events":{"type":"integer","title":"Total Events","description":"符合條件的事件總數","default":0}},"type":"object","required":["message"],"title":"ChatResponse","description":"對話式聊天回應"},"DateTimeResponse":{"properties":{"utc_datetime":{"type":"string","title":"Utc Datetime"},"utc_timestamp":{"type":"number","title":"Utc Timestamp"},"utc_Y":{"type":"integer","title":"Utc Y"},"utc_m":{"type":"integer","title":"Utc M"},"utc_d":{"type":"integer","title":"Utc D"},"utc_H":{"type":"integer","title":"Utc H"},"utc_M":{"type":"integer","title":"Utc M"},"utc_S":{"type":"integer","title":"Utc S"},"utc_microsecond":{"type":"integer","title":"Utc Microsecond"},"timezone":{"type":"string","title":"Timezone","default":"UTC"},"iso_format":{"type":"string","title":"Iso Format"}},"type":"object","required":["utc_datetime","utc_timestamp","utc_Y","utc_m","utc_d","utc_H","utc_M","utc_S","utc_microsecond","iso_format"],"title":"DateTimeResponse"},"EventListResp":{"properties":{"items":{"items":{"$ref":"#/components/schemas/app__router__Events__DTO__EventRead"},"type":"array","title":"Items"},"item_total":{"type":"integer","title":"Item Total"},"page_size":{"type":"integer","title":"Page Size"},"page_now":{"type":"integer","title":"Page Now"},"page_total":{"type":"integer","title":"Page Total"}},"type":"object","required":["items","item_total","page_size","page_now","page_total"],"title":"EventListResp"},"EventSimple":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"recording_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Recording Id"},"action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action"},"scene":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scene"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary"},"objects":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Objects"},"start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Time"},"duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration"}},"type":"object","required":["id"],"title":"EventSimple","description":"查詢結果中的事件（精簡版）"},"EventUpdate":{"properties":{"recording_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Recording Id"},"action":{"anyOf":[{"type":"string","maxLength":128},{"type":"null"}],"title":"Action"},"scene":{"anyOf":[{"type":"string","maxLength":128},{"type":"null"}],"title":"Scene"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary"},"objects":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Objects"},"start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Time"},"duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration"}},"type":"object","title":"EventUpdate"},"FunctionCallResult":{"properties":{"function_name":{"type":"string","title":"Function Name","description":"函數名稱"},"arguments":{"additionalProperties":true,"type":"object","title":"Arguments","description":"函數參數"},"result":{"title":"Result","description":"函數返回結果"}},"type":"object","required":["function_name"],"title":"FunctionCallResult","description":"函數調用結果"},"Gender":{"type":"string","enum":["male","female"],"title":"Gender"},"GenerateTokenReq":{"properties":{"action":{"type":"string","enum":["publish","read"],"title":"Action","default":"publish"},"segment_seconds":{"type":"integer","maximum":600.0,"minimum":1.0,"title":"Segment Seconds","default":30},"ttl":{"anyOf":[{"type":"integer","maximum":3600.0,"minimum":30.0},{"type":"null"}],"title":"Ttl"}},"type":"object","title":"GenerateTokenReq"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LLMModelAPIConfig":{"properties":{"providers":{"additionalProperties":{"$ref":"#/components/schemas/LLMProviderConfig"},"type":"object","title":"Providers","description":"供應商設定"}},"type":"object","title":"LLMModelAPIConfig","description":"LLM 模型 API 設定"},"LLMProviderConfig":{"properties":{"api_key":{"type":"string","title":"Api Key","description":"API 金鑰"},"model_names":{"items":{"type":"string"},"type":"array","title":"Model Names","description":"可用的模型名稱列表"}},"type":"object","required":["api_key"],"title":"LLMProviderConfig","description":"單一 LLM 供應商設定"},"LoginResponseDTO":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"LoginResponseDTO"},"PlayHLSURLResp":{"properties":{"play_hls_url":{"type":"string","title":"Play Hls Url"},"ttl":{"type":"integer","title":"Ttl"},"expires_at":{"type":"integer","title":"Expires At"}},"type":"object","required":["play_hls_url","ttl","expires_at"],"title":"PlayHLSURLResp"},"PlayWebRTCURLResp":{"properties":{"play_webrtc_url":{"type":"string","title":"Play Webrtc Url"},"ttl":{"type":"integer","title":"Ttl"},"expires_at":{"type":"integer","title":"Expires At"}},"type":"object","required":["play_webrtc_url","ttl","expires_at"],"title":"PlayWebRTCURLResp"},"RecordingListResp":{"properties":{"items":{"items":{"$ref":"#/components/schemas/RecordingRead"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["items","total"],"title":"RecordingListResp"},"RecordingRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"camera_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Camera Id"},"s3_key":{"type":"string","title":"S3 Key"},"duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration"},"is_processed":{"type":"boolean","title":"Is Processed"},"is_embedding":{"type":"boolean","title":"Is Embedding"},"size_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Size Bytes"},"upload_status":{"type":"string","title":"Upload Status"},"start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Time"},"end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Time"},"video_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Video Metadata"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","user_id","s3_key","is_processed","is_embedding","upload_status"],"title":"RecordingRead"},"RecordingUrlResp":{"properties":{"url":{"type":"string","title":"Url"},"ttl":{"type":"integer","maximum":604800.0,"minimum":30.0,"title":"Ttl"},"expires_at":{"type":"integer","title":"Expires At"}},"type":"object","required":["url","ttl","expires_at"],"title":"RecordingUrlResp"},"SignupRequestDTO":{"properties":{"account":{"type":"string","title":"Account"},"name":{"type":"string","title":"Name"},"gender":{"$ref":"#/components/schemas/Gender"},"birthday":{"type":"string","format":"date","title":"Birthday"},"phone":{"type":"string","title":"Phone"},"email":{"type":"string","format":"email","title":"Email"},"headshot_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Headshot Url"},"password":{"type":"string","title":"Password"}},"type":"object","required":["account","name","gender","birthday","phone","email","password"],"title":"SignupRequestDTO"},"StreamConnectResp":{"properties":{"ttl":{"type":"integer","title":"Ttl"},"info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Info"}},"type":"object","required":["ttl"],"title":"StreamConnectResp"},"TokenVersionResp":{"properties":{"token_version":{"type":"integer","title":"Token Version"}},"type":"object","required":["token_version"],"title":"TokenVersionResp"},"UpdateUserProfileDTO":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"gender":{"anyOf":[{"$ref":"#/components/schemas/Gender"},{"type":"null"}]},"birthday":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Birthday"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"headshot_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Headshot Url"}},"type":"object","title":"UpdateUserProfileDTO"},"UpdateUserSettingsRequest":{"properties":{"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone","description":"時區設定"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"語言設定"},"theme":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Theme","description":"主題設定"},"notifications_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Notifications Enabled","description":"是否啟用通知"},"default_llm_provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Default Llm Provider","description":"預設 LLM 供應商"},"default_llm_model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Default Llm Model","description":"預設 LLM 模型"},"llm_providers":{"anyOf":[{"additionalProperties":{"additionalProperties":true,"type":"object"},"type":"object"},{"type":"null"}],"title":"Llm Providers","description":"LLM 供應商設定"}},"type":"object","title":"UpdateUserSettingsRequest","description":"更新使用者設定請求"},"UserSettings-Input":{"properties":{"timezone":{"type":"string","title":"Timezone","description":"使用者時區","default":"Asia/Taipei"},"llm_model_api":{"$ref":"#/components/schemas/LLMModelAPIConfig"},"default_llm_provider":{"type":"string","title":"Default Llm Provider","description":"預設 LLM 供應商","default":"google"},"default_llm_model":{"type":"string","title":"Default Llm Model","description":"預設 LLM 模型","default":"gemini-2.0-flash-exp"},"language":{"type":"string","title":"Language","description":"語言設定","default":"zh-TW"},"theme":{"type":"string","title":"Theme","description":"主題設定","default":"light"},"notifications_enabled":{"type":"boolean","title":"Notifications Enabled","description":"是否啟用通知","default":true}},"type":"object","title":"UserSettings","description":"使用者設定模型"},"UserSettings-Output":{"properties":{"timezone":{"type":"string","title":"Timezone","description":"使用者時區","default":"Asia/Taipei"},"llm_model_api":{"$ref":"#/components/schemas/LLMModelAPIConfig"},"default_llm_provider":{"type":"string","title":"Default Llm Provider","description":"預設 LLM 供應商","default":"google"},"default_llm_model":{"type":"string","title":"Default Llm Model","description":"預設 LLM 模型","default":"gemini-2.0-flash-exp"},"language":{"type":"string","title":"Language","description":"語言設定","default":"zh-TW"},"theme":{"type":"string","title":"Theme","description":"主題設定","default":"light"},"notifications_enabled":{"type":"boolean","title":"Notifications Enabled","description":"是否啟用通知","default":true}},"type":"object","title":"UserSettings","description":"使用者設定模型"},"UserSettingsResponse":{"properties":{"settings":{"$ref":"#/components/schemas/UserSettings-Output","description":"使用者設定"},"message":{"type":"string","title":"Message","description":"回應訊息","default":"設定已更新"}},"type":"object","required":["settings"],"title":"UserSettingsResponse","description":"使用者設定回應"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"app__router__Events__DTO__EventRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"recording_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Recording Id"},"action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action"},"scene":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scene"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary"},"objects":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Objects"},"start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Time"},"duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id"],"title":"EventRead"},"app__router__Recordings__DTO__EventRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"recording_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Recording Id"},"action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action"},"scene":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scene"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary"},"objects":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Objects"},"start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Time"},"duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["id"],"title":"EventRead"},"app__router__Recordings__DTO__OkResp":{"properties":{"ok":{"type":"boolean","title":"Ok","default":true}},"type":"object","title":"OkResp"}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"X-API-Key"},"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/v1/auth/login"}}}}}}