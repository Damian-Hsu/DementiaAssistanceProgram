{% extends 'base.html' %}
{% block content %}
  {% include './partials/header.html'%}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/recordings.css') }}">
  
  <!-- YouTube 風格主布局 -->
  <main class="recordings-main-layout">
        <!-- 左側：影片播放區 -->
        <section class="player-section">
          <div class="player-container">
            <video id="videoPlayer" controls playsinline preload="metadata"></video>
            <div class="player-placeholder" id="playerPlaceholder">
              <p>請從右側選擇一個影片開始播放</p>
            </div>
          </div>
          
          <!-- 影片詳細資訊（在播放器下方） -->
          <div class="video-details" id="videoDetails" style="display: none;">
            <h2 class="video-title" id="videoTitle"></h2>
            <div class="video-meta">
              <span class="meta-item" id="videoDuration"></span>
              <span class="meta-item" id="videoTime"></span>
            </div>
            
            <!-- 影片內的事件列表 -->
            <div class="events-section">
              <h3>影片內的事件</h3>
              <div class="events-list" id="eventsList"></div>
            </div>
            
            <!-- 刪除按鈕 -->
            <div class="video-actions">
              <button class="btn btn-danger" id="deleteVideoBtn">刪除影片</button>
            </div>
          </div>
        </section>

        <!-- 右側：影片列表 -->
        <section class="list-section">
          <div class="list-header">
            <h2>影片列表</h2>
            <section class="search-bar">
              <div class="search-group">
                <label for="keywords">搜尋</label>
                <input id="keywords" type="text" placeholder="請輸入關鍵字" />
              </div>
              <div class="search-group">
                <label for="start">起始日期</label>
                <input id="start" type="date" />
              </div>
              <div class="search-group">
                <label for="end">結束日期</label>
                <input id="end" type="date" />
              </div>
              <div class="search-group">
                <label for="sortOrder">排序</label>
                <select id="sortOrder">
                  <option value="-start_time">時間：新到舊</option>
                  <option value="+start_time">時間：舊到新</option>
                </select>
              </div>
              <div class="search-actions">
                <button id="resetBtn" class="btn-secondary">重設</button>
              </div>
            </section>
          </div>
          <div class="recordings-list" id="recordingsList">
            <p class="loading">載入中...</p>
          </div>
          <!-- 分頁（放在 list-section 最底下） -->
          <div class="pagination" id="recordingsPagination" style="display:none;">
            <button id="prevBtn" class="page-btn" type="button">‹</button>
            <input id="pageInput" type="number" min="1" value="1" />
            <span id="pageTotal">/ 1</span>
            <button id="nextBtn" class="page-btn" type="button">›</button>

            <div class="pagination-info">
              <span>每頁</span>
              <input id="pageSize" type="number" min="1" max="200" value="20" />
              <span>筆，共 <span id="totalCount">0</span> 筆</span>
            </div>
          </div>
        </section>
      </main>

  <script type="module" src="/static/js/recordings.js"></script>

{% endblock %}
